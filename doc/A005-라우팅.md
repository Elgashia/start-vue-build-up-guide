# 라우팅

Vue로 개발하려는 초보자들을 위한 가이드 문서입니다.  
이 장은 라우팅 처리를 설명합니다. 

> 유영창 : frog@falinux.com

## 페이지 이동

* [전체 목차](../README.md) 
* [이전 단계](./A004-초-간단-채팅-서비스.md)
* [다음 단계](./A000-준비중.md)

## 라우팅

시나리오가 준비 되었고 필요한 화면이 결정되었으므로 이를 VUE 로 구현하기 위해서 가장 처음 라우팅 처리를 하겠습니다. 

라우팅 처리는 router.js 을 수정하고 화면별 뷰 컴포넌트를 src/view/ 디렉토리에 소스 형태로 만듭니다.

일단 기본적인 정보를 정의 할 필요가 있습니다. 

우리가 만들 화면은 다음 두 가지 입니다. 

* 홈페이지 겸 로그인 페이지 
* 메세지 처리 페이지 

이름과 파일명을 다음과 같이 정합니다. 

* 홈페이지 겸 로그인 페이지 

    - 파일명 : views/home-main.vue  
    - 컴포넌트 이름 : home-main  
    - URL : /  
    - 해쉬태그 URL : /#/  

* 메세지 처리 페이지 

    - 파일명 : views/messages-main.vue  
    - 컴포넌트 이름 : messages-main  
    - URL : /messages
    - 해쉬태그 URL : /#/messages  

컴포넌트나 파일명은 저 개인 적인 취양입니다.  

전 디렉토리 깊이가 너무 깊어 지는 것을 싫어 합니다. 
나중에 프로그램 수정이나 버그 잡을 때 가급적 쉽게 찾을 수 있는 구성과 이름을 짓도록 합니다. 

그래서 폴더형태로 각각을 구별해 나가기 보다는 파일명을 조금 구조적으로 이름을 지어서 작업합니다. 
보통 앞에는 가장 큰 구룹을 구분짓는 이름을 쓰고 '-' 로 붙인 후 세부 구별이름을 씁니다. 새부 구별명은 1 개 이상을 쓸 수 도 있습니다. 

그리고 큰 구룹의 세부 구별명으로 사용하는 main 은 각 구룹별 시작점이면서 핵심에 해당하는 것을 의미합니다.

views/ 디렉토리에 생성되는 뷰 컴포넌트는 나중에 vuex 유닛과 연결되고 어플리케이션 데이터에 의존적인 컴포넌트로 작성합니다. 

반면에 omponents/ 디렉토리에 생성되는 컴포넌트는 일종에 라이브러리 같은 것으로 어플리케이션에 종속되지 않는 형태로 작성합니다.

### home-main.vue 생성

이제 사이트에 처음 방문했을 때 처리될 home-main.vue 를 다음과 같이 작성합니다. 
앞의 따라하기에서 작성했던 App.vue 를 조금 바꾸어서 다음과 같이 작성합니다. 

> views/home-main.vue  
~~~
<template>
  <div id="home-main">
    <h1>Home Main</h1>
  </div>
</template>

<script>
import { mapGetters, mapMutations, mapActions } from 'vuex'

export default {
  name: 'home-main',

  data () {
    return {
    }
  },

  computed: {
    ...mapGetters({
    }),

    sample: {
      get () { return '' },
      set (newValue) {}
    }
  },

  components: {
  },

  methods: {
    ...mapMutations({
    }),
    ...mapActions({
    })
  },

  created () { console.log('CALL created()') },
  mounted () { console.log('CALL mounted()') },
  activated () { console.log('CALL activated()') },
  deactivated () { console.log('CALL deactivated()') },
  destroyed () { console.log('CALL destroyed()') }
}
</script>

<style>
</style>
<style scoped>
</style>
~~~

여러분이 주의해서 보셔야 할 것이 있습니다. 

"home-main" 이 사용된 곳 입니다. 

첫번째는 <template> 의 가장 상위에 선언된 <div id="home-main"> 입니다. 
두번째는 <script>의 컴포넌트의 name: 'home-main' 입니다. 

저는 VUE 프로그램을 작성할 때 파일명과 <template> 최상위 테그의 id 그리고 View 컴포넌트 name 을 일치 시킵니다.

혹시 이런 룰을 갖지 않으신 VUE 지식이 청정한 초보 분들은 제 방식을 따르시기 바랍니다. 
나중에 떡이 생깁니다. 

통일된 이런 규칙은 추후에 진행되는 단위 테스트, E2E 테스트 과정을 포함한 개발 과정에 많은 이득을 얻을 겁니다. 

### home-main.vue 생성

사용자가 주저리 주저리 떠들 페이지인 messages-main.vue 를 다음과 같이 작성합니다. 
앞의 따라하기에서 작성했던 App.vue 를 조금 바꾸어서 다음과 같이 작성합니다. 

가만히 보시면 앞에서 보신 소스와 같이 id, name 부분만 바뀐것을 알 수 있습니다. 

> views/messages-main.vue
~~~
<template>
  <div id="messages-main">
    <h1>Home Main</h1>
  </div>
</template>

<script>
import { mapGetters, mapMutations, mapActions } from 'vuex'

export default {
  name: 'messages-main',

  data () {
    return {
    }
  },

  computed: {
    ...mapGetters({
    }),

    sample: {
      get () { return '' },
      set (newValue) {}
    }
  },

  components: {
  },

  methods: {
    ...mapMutations({
    }),
    ...mapActions({
    })
  },

  created () { console.log('CALL created()') },
  mounted () { console.log('CALL mounted()') },
  activated () { console.log('CALL activated()') },
  deactivated () { console.log('CALL deactivated()') },
  destroyed () { console.log('CALL destroyed()') }
}
</script>

<style>
</style>
<style scoped>
</style>
~~~

여기까지 진행했다고 해서 홈페이지가 특별히 변하지는 않습니다. 어플리케이션에 이 두 소스가 포함되지 않았기 때문입니다. 

이제 위 두 페이지를 어플리케이션과 연결하고 컴파일 대상에 포함되기 위해서는 router.js 와 App.vue 를 수정해야 합니다. 

* 홈페이지 겸 로그인 페이지 

    - 파일명 : views/home-main.vue  
    - 컴포넌트 이름 : home-main  
    - URL : /  
    - 해쉬태그 URL : /#/  

* 메세지 처리 페이지 

    - 파일명 : views/messages-main.vue  
    - 컴포넌트 이름 : messages-main  
    - URL : /messages
    - 해쉬태그 URL : /#/messages  



## 페이지 이동

* [전체 목차](../README.md) 
* [이전 단계](./A004-초-간단-채팅-서비스.md)
* [다음 단계](./A000-준비중.md)
